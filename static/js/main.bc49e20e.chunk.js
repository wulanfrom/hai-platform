(this["webpackJsonphai-platform"]=this["webpackJsonphai-platform"]||[]).push([[0],{48:function(e,t,a){},58:function(e,t,a){e.exports=a(75)},63:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(23),c=a.n(r),o=(a(63),a(64),a(48),a(49)),i=a(50),u=a(52),m=a(51),s=a(46),d=a(27);function p(){return l.a.createElement("div",{className:"banner-wrapper p-4"},l.a.createElement("h1",null,"Welcome to the XAI Platform"),l.a.createElement("p",null,"This platform allows you to upload pictures and apply explainability models to it. You will work with methods for explaining model predictions in image classification tasks. Such explanations help users resolve questions around what\u2019s happening inside of the classification model and why. As users explore these explanations, they may come up with additional questions about the model, which possibly requires other kinds of explanations."))}var f=a(12);function E(){return l.a.createElement("div",null,l.a.createElement(p,null),l.a.createElement("div",{className:"proceed-wrapper p-4"},l.a.createElement("h2",null,"What Should I Do?"),l.a.createElement("ul",{className:"what-to-do ml-5"},l.a.createElement("li",null,l.a.createElement("p",null,"Try the platform with several pictures"),l.a.createElement("p",null,"Does the model label them correctly?")),l.a.createElement("li",null,l.a.createElement("p",null,"Apply explainability models to those pictures."),l.a.createElement("p",null,"Did you find any image for which the algorithm does not give an explanation that is easy to understand for users?")),l.a.createElement("li",null,l.a.createElement("p",null,"Is the explanation sufficient to trust the model predictions?"),l.a.createElement("p",null,"When is it sufficient? When is it not sufficient? ")),l.a.createElement("li",null,l.a.createElement("p",null,"For insufficient predictions, what can you do to make the model label it correctly?"),l.a.createElement("p",null,"What kinds of additional information would you include in your explanation?"))),l.a.createElement("div",{className:"mx-auto"},l.a.createElement(f.a,{href:"/hai-platform/upload",type:"button",className:"getStarted-btn"},"Get Started")),l.a.createElement("hr",null),l.a.createElement("h2",{className:"mt-4"},"Explore What Others Found"),l.a.createElement("p",null,"Explore the observations done by other users and compare it to yours."),l.a.createElement(f.a,{href:"/hai-platform/explore",className:"explore-btn"},"Explore")))}var v=a(5),h=a(95),b=a(100),g=a(98),O=a(99),y=Object(h.a)((function(e){return{root:{width:"100%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));function j(e){var t=y(),a=l.a.useState(new Set),n=Object(v.a)(a,2),r=(n[0],n[1],["UPLOAD","APPLY MODEL","GET EXPLANATION","SUMMARIZE & SHARE"]),c=e.currentStep;return l.a.createElement("div",{className:t.root},l.a.createElement(b.a,{activeStep:c},r.map((function(e,t){var a={};return l.a.createElement(g.a,Object.assign({key:e},{}),l.a.createElement(O.a,a,e))}))))}var x=a(17);a(68);function N(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(""),i=Object(v.a)(o,2),u=i[0],m=i[1],s=Object(n.useState)([]),d=Object(v.a)(s,2),p=d[0],f=d[1],E=Object(n.useState)([]),h=Object(v.a)(E,2),b=h[0],g=h[1],O=e.currentStep,y=Object(n.useRef)(),j=Object(n.useRef)(),N=Object(n.useRef)(),k=Object(n.useRef)();Object(n.useEffect)((function(){}),[]),Object(n.useEffect)((function(){var e=r.reduce((function(e,t){return e.find((function(e){return e.name===t.name}))?e:e.concat([t])}),[]);f(Object(x.a)(e))}),[r]),Object(n.useEffect)((function(){var t=0===b.length&&p.length>0;e.checkNext(t),e.getImages(p)}),[b,p]);var S=function(t){for(var a=function(a){w(t[a])?(c((function(e){return[].concat(Object(x.a)(e),[t[a]])})),L(t[a]),e.addData({id:t[a].name,data:t[a],agreeLabel:0,agreeExp:0,explanation:"",LIMEPic:null})):(t[a].invalid=!0,c((function(e){return[].concat(Object(x.a)(e),[t[a]])})),m("File type not permitted"),g((function(e){return[].concat(Object(x.a)(e),[t[a]])})),L(t[a]))},n=0;n<t.length;n++)a(n)},w=function(e){return-1!==["image/jpeg","image/jpg","image/png"].indexOf(e.type)},I=function(t){var a=p.findIndex((function(e){return e.name===t}));p.splice(a,1),f(Object(x.a)(p));var n=r.findIndex((function(e){return e.name===t}));r.splice(n,1),c(Object(x.a)(r));var l=b.findIndex((function(e){return e.name===t}));-1!==l&&(b.splice(l,1),g(Object(x.a)(b))),e.getDeletedItem(t)},L=function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){j.current.style.backgroundImage="url(".concat(e.target.result,")")}};return l.a.createElement("div",null,0==O?l.a.createElement("div",null,l.a.createElement("div",{className:"container"},b.length?l.a.createElement("p",null,"Please remove all unsupported files."):"",l.a.createElement("div",{className:"drop-container",onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},onDragLeave:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var t=e.dataTransfer.files;t.length&&S(t)},onClick:function(){y.current.click()}},l.a.createElement("div",{className:"drop-message"},l.a.createElement("input",{ref:y,className:"file-input",type:"file",multiple:!0,onChange:function(){y.current.files.length&&S(y.current.files)}}),l.a.createElement("div",{className:"upload-icon"}),"Drag & Drop files here or click to upload")),l.a.createElement("div",{className:"file-display-container"},p.map((function(e,t){return l.a.createElement("div",{className:"file-status-bar",key:t},l.a.createElement("div",{onClick:e.invalid?function(){return I(e.name)}:function(){return function(e){var t=new FileReader;k.current.style.display="block",t.readAsDataURL(e),t.onload=function(e){N.current.style.backgroundImage="url(".concat(e.target.result,")")}}(e)}},l.a.createElement("div",{className:"file-type-logo",ref:j}),l.a.createElement("div",{className:"file-type"},(a=e.name).substring(a.lastIndexOf(".")+1,a.length)||a),l.a.createElement("span",{className:"file-name ".concat(e.invalid?"file-error":"")},e.name),l.a.createElement("span",{className:"file-size"},"(",function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]}(e.size),")")," ",e.invalid&&l.a.createElement("span",{className:"file-error-message"},"(",u,")")),l.a.createElement("div",{className:"file-remove",onClick:function(){return I(e.name)}},"X"));var a})))),l.a.createElement("div",{className:"modal",ref:k},l.a.createElement("div",{className:"overlay"}),l.a.createElement("span",{className:"close",onClick:function(){return k.current.style.display="none",void(N.current.style.backgroundImage="none")}},"X"),l.a.createElement("div",{className:"modal-image",ref:N}))):"")}var k=a(33),S=a(34);a(69);function w(e){var t=e.data,a=e.name,r=Object(n.useRef)(),c=Object(n.useState)(0),o=Object(v.a)(c,2),i=o[0],u=o[1],m={id:a,data:t,agreeLabel:i,agreeExp:0,explanation:"",LIMEPic:null};Object(n.useEffect)((function(){m={id:a,agreeLabel:i},e.sendChangedData(m)}),[i]);return Object(n.useEffect)((function(){!function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){r.current.style.backgroundImage="url(".concat(e.target.result,")")}}(t)}),[]),l.a.createElement("div",{className:"card-wrapper"},l.a.createElement("div",{className:"card-container"},l.a.createElement("div",{className:"photo-container",ref:r}),l.a.createElement("div",null,l.a.createElement("p",{className:"card-label"},"Label"),l.a.createElement("div",null,l.a.createElement("p",{className:"card-label"},"Do you Agree with the Label?"),l.a.createElement(k.a,{toggle:!0},[{name:"Yes",value:"1"},{name:"No",value:"0"}].map((function(e,t){return l.a.createElement(S.a,{key:t,type:"radio",variant:"secondary",name:"radio",value:e.value,checked:i==e.value,onChange:function(e){return u(e.currentTarget.value)}},e.name)})))))))}function I(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Explore Page"))}var L=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(s.a,{collapseOnSelect:!0,bg:"dark",variant:"dark"},l.a.createElement(s.a.Brand,{href:"/hai-platform/getStarted"},"XAIPlatform"),l.a.createElement(d.a,{className:"ml-auto"},l.a.createElement(d.a.Link,{href:"/hai-platform/getStarted"},"GET STARTED"),l.a.createElement(d.a.Link,{href:"/hai-platform/upload"},"APPLY MODELS"),l.a.createElement(d.a.Link,{href:"/hai-platform/explore"},"EXPLORE"))))}}]),a}(n.Component),D=a(22),C=a(8),A=(a(71),a(14)),T=a(35);a(72);function R(e){var t=e.data,a=Object(n.useRef)(),r=Object(n.useState)(t.agreeExp),c=Object(v.a)(r,2),o=c[0],i=c[1],u=Object(n.useState)(t.explanation),m=Object(v.a)(u,2),s=m[0],d=m[1],p={id:t.id,agreeExp:o,explanation:s,LIMEPic:null};Object(n.useEffect)((function(){!function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){a.current.style.backgroundImage="url(".concat(e.target.result,")")}}(t.data)}),[]);Object(n.useEffect)((function(){p={id:t.id,agreeExp:o,explanation:s},e.sendChangedExplanation(p)}),[o,s]);return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",null,l.a.createElement("div",{className:"image-container",ref:a}),l.a.createElement("p",null,t.id))),l.a.createElement("td",null),l.a.createElement("td",null,l.a.createElement("div",{className:"labelName"},l.a.createElement("p",null,"Label"),l.a.createElement("p",null,"Bird")),l.a.createElement("div",{className:"agreeLabel"},l.a.createElement("p",null,"Is the explanation easy to understand?"),l.a.createElement(k.a,{toggle:!0},[{name:"Yes",value:"1"},{name:"No",value:"0"}].map((function(e,t){return l.a.createElement(S.a,{key:t,type:"radio",variant:"secondary",name:"radio",value:e.value,checked:o==e.value,onChange:function(e){return i(e.currentTarget.value)}},e.name)})))),l.a.createElement("div",null,l.a.createElement(A.a.Group,{controlId:"explanationTextArea"},l.a.createElement(A.a.Label,null,"Is the Explanation Sufficient to Trust the model prediction?"),l.a.createElement(A.a.Control,{as:"textarea",value:s,rows:3,onChange:function(e){d(e.target.value)}})))))}function M(e){var t=Object(n.useState)(e.data),a=Object(v.a)(t,2),r=a[0],c=(a[1],function(t){var a=r.map((function(e){if(e.id==t.id){var a=e;a.explanation=t.explanation,a.agreeExp=t.agreeExp}return e}));e.sendExpToGive(a)}),o=r.map((function(e,t){return l.a.createElement(R,{data:e,key:t,sendChangedExplanation:c})}));return l.a.createElement("div",null,l.a.createElement("p",null,"This is the lime table"),l.a.createElement(T.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Input Image"),l.a.createElement("th",null,"Explanation"),l.a.createElement("th",null,"Label"))),l.a.createElement("tbody",null,o)))}function P(){return l.a.createElement("div",null,l.a.createElement("p",null,"This is the shap table"),l.a.createElement(T.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Input Image"),l.a.createElement("th",null,"Explanation"),l.a.createElement("th",null,"Label"))),l.a.createElement("tbody",null)))}function B(e){var t=Object(n.useState)("lime"),a=Object(v.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)("lime"),i=Object(v.a)(o,2),u=i[0],m=i[1],s=Object(n.useState)(!1),d=Object(v.a)(s,2),p=d[0],E=d[1],h=Object(n.useState)(e.data),b=Object(v.a)(h,2),g=b[0],O=(b[1],Object(n.useState)(e.improvement)),y=Object(v.a)(O,2),j=y[0],x=y[1];return Object(n.useEffect)((function(){e.sendImprovement(j)}),[j]),l.a.createElement("div",null,l.a.createElement(A.a,null,l.a.createElement(A.a.Group,{controlId:"explainabilityModelSelect"},l.a.createElement(A.a.Label,null,"Choose an Explainability Model"),l.a.createElement(A.a.Control,{as:"select",value:u,onChange:function(e){m(e.target.value)}},l.a.createElement("option",{value:"lime"},"LIME"),l.a.createElement("option",{value:"shap"},"SHAP"))),l.a.createElement(f.a,{variant:"primary",onClick:function(){c(u),E(!0)}},"Apply Explanation")),l.a.createElement("div",null,"lime"==r&&p?l.a.createElement(M,{data:g,sendExpToGive:function(t){e.sendExpToMasterUpload(t)}}):"","shap"==r&&p?l.a.createElement(P,{data:g}):""),l.a.createElement("div",null,l.a.createElement(A.a.Group,{controlId:"improvementTextArea",className:"improvementTextArea"},l.a.createElement(A.a.Label,null,"What can you do to make the model label images correctly?"),l.a.createElement("p",{className:"improvementLabel"},"What kinds of additional information would you include in your explanation?"),l.a.createElement(A.a.Control,{as:"textarea",value:j,rows:3,onChange:function(e){x(e.target.value)}}))))}function W(){var e=Object(n.useState)(0),t=Object(v.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),o=Object(v.a)(c,2),i=(o[0],o[1]),u=Object(n.useState)(!1),m=Object(v.a)(u,2),s=m[0],d=m[1],p=Object(n.useState)([]),E=Object(v.a)(p,2),h=E[0],b=E[1],g=Object(n.useState)(""),O=Object(v.a)(g,2),y=(O[0],O[1],Object(n.useState)("")),k=Object(v.a)(y,2),S=k[0],I=k[1],L=function(e){r(a>=3?3:function(e){return e+1})},D=function(e){var t=h.map((function(t){t.id==e.id&&(t.agreeLabel=e.agreeLabel);return t}));b(t)};return console.log("improvement"),console.log(S),l.a.createElement("div",null,l.a.createElement("h1",null,"Step: ",a+1),l.a.createElement(j,{currentStep:a}),a>0?l.a.createElement(f.a,{className:"btn btn-secondary",type:"button",onClick:function(){r(0==a?0:function(e){return e-1})}},"Previous"):"",s?l.a.createElement(f.a,{className:"btn btn-secondary",type:"button",onClick:L},"Next"):l.a.createElement(f.a,{disabled:!0,className:"btn btn-secondary",type:"button",onClick:L},"Next"),l.a.createElement("div",null,l.a.createElement(N,{addData:function(e){b((function(t){return[].concat(Object(x.a)(t),[e])}))},getImages:function(e){i(e)},checkNext:function(e){d(e)},currentStep:a,getDeletedItem:function(e){var t=h.filter((function(t){return t.id!==e}));b(t)}}),1==a?h.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement(w,{name:e.id,data:e.data,agreeValue:e.agreeLabel,sendChangedData:D}))})):"",2==a?l.a.createElement(B,{data:h,sendImprovement:function(e){I(e)},sendExpToMasterUpload:function(e){b(e)},improvement:S}):""))}var F=function(){return l.a.createElement("div",null,l.a.createElement(L,null),l.a.createElement(D.a,null,l.a.createElement(C.c,null,l.a.createElement(C.a,{exact:!0,path:"/hai-platform/getStarted",component:E}),l.a.createElement(C.a,{path:"/hai-platform/upload",component:W}),l.a.createElement(C.a,{path:"/hai-platform/explore",component:I}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(D.a,null,l.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[58,1,2]]]);
//# sourceMappingURL=main.bc49e20e.chunk.js.map