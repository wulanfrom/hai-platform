(this["webpackJsonphai-platform"]=this["webpackJsonphai-platform"]||[]).push([[0],{62:function(e,a,t){},71:function(e,a,t){e.exports=t(94)},76:function(e,a,t){},78:function(e,a,t){},82:function(e,a,t){},83:function(e,a,t){},84:function(e,a,t){},86:function(e,a,t){},87:function(e,a,t){},88:function(e,a,t){},89:function(e,a,t){},90:function(e,a,t){},91:function(e,a,t){},94:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(28),c=t.n(r),o=(t(76),t(77),t(62),t(63)),i=t(64),u=t(66),m=t(65),s=t(60),d=t(39);function E(){return l.a.createElement("div",{className:"banner-wrapper p-4"},l.a.createElement("h1",null,"Welcome to the XAI Platform"),l.a.createElement("p",null,"This platform allows you to upload pictures and apply explainability models to it. You will work with methods for explaining model predictions in image classification tasks. Such explanations help users resolve questions around what\u2019s happening inside of the classification model and why. As users explore these explanations, they may come up with additional questions about the model, which possibly requires other kinds of explanations."))}var p=t(10);function f(){return l.a.createElement("div",null,l.a.createElement(E,null),l.a.createElement("div",{className:"proceed-wrapper p-4"},l.a.createElement("h2",null,"What Should I Do?"),l.a.createElement("ul",{className:"what-to-do ml-5"},l.a.createElement("li",null,l.a.createElement("p",null,"Try the platform with several pictures"),l.a.createElement("p",null,"Does the model label them correctly?")),l.a.createElement("li",null,l.a.createElement("p",null,"Apply explainability models to those pictures."),l.a.createElement("p",null,"Did you find any image for which the algorithm does not give an explanation that is easy to understand for users?")),l.a.createElement("li",null,l.a.createElement("p",null,"Is the explanation sufficient to trust the model predictions?"),l.a.createElement("p",null,"When is it sufficient? When is it not sufficient? ")),l.a.createElement("li",null,l.a.createElement("p",null,"For insufficient predictions, what can you do to make the model label it correctly?"),l.a.createElement("p",null,"What kinds of additional information would you include in your explanation?"))),l.a.createElement("div",{className:"mx-auto"},l.a.createElement(p.a,{href:"/hai-platform/upload",type:"button",className:"getStarted-btn"},"Get Started")),l.a.createElement("hr",null),l.a.createElement("h2",{className:"mt-4"},"Explore What Others Found"),l.a.createElement("p",null,"Explore the observations done by other users and compare it to yours."),l.a.createElement(p.a,{href:"/hai-platform/explore",className:"explore-btn"},"Explore")))}var v=t(6),b=t(116),h=t(121),g=t(119),y=t(120),x=(t(78),Object(b.a)((function(e){return{root:{width:"100%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}})));function O(e){var a=x(),t=l.a.useState(new Set),n=Object(v.a)(t,2),r=(n[0],n[1],["UPLOAD","APPLY MODEL","GET EXPLANATION","SUMMARIZE & SHARE"]),c=e.currentStep;return l.a.createElement("div",{className:"progressWrapper "+a.root},l.a.createElement(h.a,{activeStep:c},r.map((function(e,a){var t={};return l.a.createElement(g.a,Object.assign({key:e},{}),l.a.createElement(y.a,t,e))}))))}var j=t(21);t(82),t(83);function N(e){var a=e.data,t=e.key,r=e.fileSize,c=e.fileType,o=e.errorMessage,i=Object(n.useRef)(),u=e.removeFile,m=e.openImageModal;return Object(n.useEffect)((function(){!function(e){var a=new FileReader;a.readAsDataURL(e),a.onload=function(e){i.current.style.backgroundImage="url(".concat(e.target.result,")")}}(a)}),[]),l.a.createElement("div",null,l.a.createElement("div",{className:"file-status-bar",key:t},l.a.createElement("div",{onClick:a.invalid?function(){return u(a.name)}:function(){return m(a)}},l.a.createElement("div",{className:"file-type-logo",ref:i},l.a.createElement("div",{className:"file-type"},c)),l.a.createElement("span",{className:"file-name ".concat(a.invalid?"file-error":"")},a.name),l.a.createElement("span",{className:"file-size"},"(",r,")")," ",a.invalid&&l.a.createElement("span",{className:"file-error-message"},"(",o,")")),l.a.createElement("div",{className:"file-remove",onClick:function(){u(a.name)}},"X")))}function k(e){var a=Object(n.useState)([]),t=Object(v.a)(a,2),r=t[0],c=t[1],o=Object(n.useState)(""),i=Object(v.a)(o,2),u=i[0],m=i[1],s=Object(n.useState)([]),d=Object(v.a)(s,2),E=d[0],p=d[1],f=Object(n.useState)([]),b=Object(v.a)(f,2),h=b[0],g=b[1],y=Object(n.useRef)(),x=(Object(n.useRef)(),Object(n.useRef)()),O=Object(n.useRef)();Object(n.useEffect)((function(){}),[]),Object(n.useEffect)((function(){var e=r.reduce((function(e,a){return e.find((function(e){return e.name===a.name}))?e:e.concat([a])}),[]);p(Object(j.a)(e))}),[r]),Object(n.useEffect)((function(){var a=0===h.length&&E.length>0;e.checkNext(a),e.getImages(E)}),[h,E]);var k=function(a){for(var t=function(t){S(a[t])?(c((function(e){return[].concat(Object(j.a)(e),[a[t]])})),e.addData({id:a[t].name,data:a[t],agreeLabel:0,agreeExp:0,explanation:"",LIMEPic:null,label:""})):(a[t].invalid=!0,c((function(e){return[].concat(Object(j.a)(e),[a[t]])})),m("File type not permitted"),g((function(e){return[].concat(Object(j.a)(e),[a[t]])})))},n=0;n<a.length;n++)t(n)},S=function(e){return-1!==["image/jpeg","image/jpg","image/png"].indexOf(e.type)},L=function(e){if(0===e)return"0 Bytes";var a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][a]},I=function(a){var t=E.findIndex((function(e){return e.name===a}));E.splice(t,1),p(Object(j.a)(E));var n=r.findIndex((function(e){return e.name===a}));r.splice(n,1),c(Object(j.a)(r));var l=h.findIndex((function(e){return e.name===a}));-1!==l&&(h.splice(l,1),g(Object(j.a)(h))),e.getDeletedItem(a)},w=function(e){var a=new FileReader;O.current.style.display="block",a.readAsDataURL(e),a.onload=function(e){x.current.style.backgroundImage="url(".concat(e.target.result,")")}};return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",{className:"container"},h.length?l.a.createElement("p",null,"Please remove all unsupported files."):"",l.a.createElement("div",{className:"drop-container",onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},onDragLeave:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var a=e.dataTransfer.files;a.length&&k(a)},onClick:function(){y.current.click()}},l.a.createElement("div",{className:"drop-message"},l.a.createElement("input",{ref:y,className:"file-input",type:"file",multiple:!0,onChange:function(){y.current.files.length&&k(y.current.files)}}),l.a.createElement("div",{className:"upload-icon"}),"Drag & Drop files here or click to upload")),l.a.createElement("div",{className:"file-display-container"},E.map((function(e,a){return l.a.createElement("div",null,l.a.createElement(N,{data:e,key:a,fileSize:L(e.size),fileType:(t=e.name,t.substring(t.lastIndexOf(".")+1,t.length)||t),errorMessage:u,openImageModal:w,removeFile:I}));var t})))),l.a.createElement("div",{className:"modal",ref:O},l.a.createElement("div",{className:"overlay"}),l.a.createElement("span",{className:"close",onClick:function(){return O.current.style.display="none",void(x.current.style.backgroundImage="none")}},"X"),l.a.createElement("div",{className:"modal-image",ref:x}))))}var S=t(47),L=t(48);t(84);function I(e){var a=e.data,t=e.name,r=e.label,c=Object(n.useRef)(),o=Object(n.useState)(0),i=Object(v.a)(o,2),u=i[0],m=i[1],s={id:t,data:a,agreeLabel:u,agreeExp:0,explanation:"",LIMEPic:null};Object(n.useEffect)((function(){s={id:t,agreeLabel:u,label:r},e.sendChangedData(s)}),[u]);return Object(n.useEffect)((function(){!function(e){var a=new FileReader;a.readAsDataURL(e),a.onload=function(e){c.current.style.backgroundImage="url(".concat(e.target.result,")")}}(a)}),[]),l.a.createElement("div",{className:"card-wrapper"},l.a.createElement("div",{className:"card-container"},l.a.createElement("div",{className:"photo-container",ref:c}),l.a.createElement("div",null,l.a.createElement("p",{className:"card-label"},"Label"),l.a.createElement("p",null,r),l.a.createElement("div",null,l.a.createElement("p",{className:"card-label"},"Do you Agree with the Label?"),l.a.createElement(S.a,{toggle:!0},[{name:"Yes",value:"1"},{name:"No",value:"0"}].map((function(e,a){return l.a.createElement(L.a,{key:a,type:"radio",variant:"secondary",name:"radio",value:e.value,checked:u==e.value,onChange:function(e){return m(e.currentTarget.value)}},e.name)})))))))}function w(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Explore Page"))}var C=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(s.a,{collapseOnSelect:!0,bg:"dark",variant:"dark"},l.a.createElement(s.a.Brand,{href:"/hai-platform/getStarted"},"XAIPlatform"),l.a.createElement(d.a,{className:"ml-auto"},l.a.createElement(d.a.Link,{href:"/hai-platform/getStarted"},"Get Started"),l.a.createElement(d.a.Link,{href:"/hai-platform/upload"},"Apply Models"),l.a.createElement(d.a.Link,{href:"/hai-platform/explore"},"Explore"))))}}]),t}(n.Component),D=t(30),T=t(9),M=(t(86),t(87),t(17)),R=t(52);t(88);function A(e){var a=e.data,t=Object(n.useRef)(),r=Object(n.useRef)(),c=Object(n.useState)(a.agreeExp),o=Object(v.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(a.explanation),s=Object(v.a)(m,2),d=s[0],E=s[1],p={id:a.id,agreeExp:i,explanation:d,LIMEPic:null},f=function(e,a){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){a.current.style.backgroundImage="url(".concat(e.target.result,")")}};Object(n.useEffect)((function(){f(a.data,t),f(a.data,r)}),[]);Object(n.useEffect)((function(){p={id:a.id,agreeExp:i,explanation:d},e.sendChangedExplanation(p)}),[i,d]);return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",null,l.a.createElement("div",{className:"image-container",ref:t}),l.a.createElement("p",null,a.id))),l.a.createElement("td",null,l.a.createElement("div",{className:"exp-container",ref:r})),l.a.createElement("td",null,l.a.createElement("div",{className:"labelName"},l.a.createElement("p",null,"Label"),l.a.createElement("p",null,a.label)),l.a.createElement("div",{className:"agreeLabel"},l.a.createElement("p",null,"Is the explanation easy to understand?"),l.a.createElement(S.a,{toggle:!0},[{name:"Yes",value:"1"},{name:"No",value:"0"}].map((function(e,a){return l.a.createElement(L.a,{key:a,type:"radio",variant:"secondary",name:"radio",value:e.value,checked:i==e.value,onChange:function(e){return u(e.currentTarget.value)}},e.name)})))),l.a.createElement("div",null,l.a.createElement(M.a.Group,{controlId:"explanationTextArea"},l.a.createElement(M.a.Label,null,"Is the Explanation Sufficient to Trust the model prediction?"),l.a.createElement(M.a.Control,{as:"textarea",value:d,rows:3,onChange:function(e){E(e.target.value)}})))))}function W(e){var a=Object(n.useState)(e.data),t=Object(v.a)(a,2),r=t[0],c=(t[1],function(a){var t=r.map((function(e){if(e.id==a.id){var t=e;t.explanation=a.explanation,t.agreeExp=a.agreeExp}return e}));e.sendExpToGive(t)}),o=r.map((function(e,a){return l.a.createElement(A,{data:e,key:a,sendChangedExplanation:c})}));return l.a.createElement("div",null,l.a.createElement("p",null,"This is the lime table"),l.a.createElement(R.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Input Image"),l.a.createElement("th",null,"Explanation"),l.a.createElement("th",null,"Label"))),l.a.createElement("tbody",null,o)))}function B(e){var a=Object(n.useState)(e.data),t=Object(v.a)(a,2),r=t[0],c=(t[1],function(a){var t=r.map((function(e){if(e.id==a.id){var t=e;t.explanation=a.explanation,t.agreeExp=a.agreeExp}return e}));e.sendExpToGive(t)}),o=r.map((function(e,a){return l.a.createElement(A,{data:e,key:a,sendChangedExplanation:c})}));return l.a.createElement("div",null,l.a.createElement("p",null,"This is the Shap table"),l.a.createElement(R.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Input Image"),l.a.createElement("th",null,"Explanation"),l.a.createElement("th",null,"Label"))),l.a.createElement("tbody",null,o)))}function F(e){var a=Object(n.useState)("lime"),t=Object(v.a)(a,2),r=t[0],c=t[1],o=Object(n.useState)("lime"),i=Object(v.a)(o,2),u=i[0],m=i[1],s=Object(n.useState)(!1),d=Object(v.a)(s,2),E=d[0],f=d[1],b=Object(n.useState)(e.data),h=Object(v.a)(b,2),g=h[0],y=(h[1],Object(n.useState)(e.improvement)),x=Object(v.a)(y,2),O=x[0],j=x[1],N=function(a){e.sendExpToMasterUpload(a)};return Object(n.useEffect)((function(){e.sendImprovement(O)}),[O]),l.a.createElement("div",null,l.a.createElement(M.a,null,l.a.createElement(M.a.Group,{controlId:"explainabilityModelSelect"},l.a.createElement(M.a.Label,null,"Choose an Explainability Model"),l.a.createElement(M.a.Control,{as:"select",value:u,onChange:function(e){m(e.target.value)}},l.a.createElement("option",{value:"lime"},"LIME"),l.a.createElement("option",{value:"shap"},"SHAP"))),l.a.createElement(p.a,{variant:"primary",onClick:function(){c(u),f(!0)}},"Apply Explanation")),l.a.createElement("div",null,"lime"==r&&E?l.a.createElement(W,{data:g,sendExpToGive:N}):"","shap"==r&&E?l.a.createElement(B,{data:g,sendExpToGive:N}):""),l.a.createElement("div",null,l.a.createElement(M.a.Group,{controlId:"improvementTextArea",className:"improvementTextArea"},l.a.createElement(M.a.Label,null,"What can you do to make the model label images correctly?"),l.a.createElement("p",{className:"improvementLabel"},"What kinds of additional information would you include in your explanation?"),l.a.createElement(M.a.Control,{as:"textarea",value:O,rows:3,onChange:function(e){j(e.target.value)}}))))}t(89),t(90);var P=t(40),G=t(33);function U(e){var a=e.data.data,t=e.data.label,r=e.data.explanation,c=Object(n.useRef)(),o=Object(n.useRef)(),i=Object(n.useRef)(),u=Object(n.useState)(!1),m=Object(v.a)(u,2),s=m[0],d=m[1],E=function(){d(!1)},f=function(e,a){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){a.current.style.backgroundImage="url(".concat(e.target.result,")")}};return Object(n.useEffect)((function(){f(a,c)}),[]),l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(P.a,{className:"summary-card",onClick:function(){d(!0),f(a,o),f(a,i)}},l.a.createElement("div",null,l.a.createElement("div",{className:"indicator"},l.a.createElement("div",{className:"label-indicator"}),l.a.createElement("div",{className:"exp-indicator"})),l.a.createElement(P.a.Img,{variant:"top",className:"photo-container",ref:c})),l.a.createElement(P.a.Body,null,l.a.createElement(P.a.Text,null,l.a.createElement("b",null,"Label: "),l.a.createElement("p",null,t))))),l.a.createElement("div",{className:"modal fade",id:"myModal"},l.a.createElement(G.a,{className:"itemModal",dialogClassName:"modal-90w",show:s,onHide:E},l.a.createElement(G.a.Header,{closeButton:!0},l.a.createElement(G.a.Title,null,"Inputted Explanation")),l.a.createElement(G.a.Body,null,l.a.createElement("div",null,l.a.createElement("h5",null,"Original Image"),l.a.createElement("img",{className:"modalImage",ref:o}),l.a.createElement("h5",null,"Image Through Explainability Model"),l.a.createElement("img",{className:"modalImage",ref:i})),l.a.createElement("div",null,l.a.createElement("h5",null,"Label"),l.a.createElement("p",null,t)),l.a.createElement("div",null,l.a.createElement("h5",null,"Explanation"),l.a.createElement("p",null,r))),l.a.createElement(G.a.Footer,null,l.a.createElement(p.a,{variant:"secondary",onClick:E},"Close")))))}function X(e){var a=e.totalData,t=a.filter((function(e){return 1==e.agreeLabel&&1==e.agreeExp})),n=a.filter((function(e){return 1==e.agreeLabel&&0==e.agreeExp})),r=a.filter((function(e){return 0==e.agreeLabel&&1==e.agreeExp})),c=a.filter((function(e){return 0==e.agreeLabel&&0==e.agreeExp}));return l.a.createElement("div",null,l.a.createElement("h2",null,"Your Observations Summary"),l.a.createElement("div",{className:"summary-container"},l.a.createElement("div",{className:"crcLabelcrcExp"},l.a.createElement("div",{className:"top-bar"},l.a.createElement("p",null,l.a.createElement("b",null,"Tab 1")),l.a.createElement("p",null,"Correct Label, Correct Explanation")),l.a.createElement("div",{className:"scrollable-summary"},t.map((function(e,a){return l.a.createElement(U,{key:a,data:e})})))),l.a.createElement("div",{className:"crcLabelWrngExp"},l.a.createElement("div",{className:"top-bar"},l.a.createElement("p",null,l.a.createElement("b",null,"Tab 2")),l.a.createElement("p",null,"Correct Label, Wrong Explanation")),l.a.createElement("div",{className:"scrollable-summary"},n.map((function(e,a){return l.a.createElement(U,{key:a,data:e})})))),l.a.createElement("div",{className:"wrngLabelcrcExp"},l.a.createElement("div",{className:"top-bar"},l.a.createElement("p",null,l.a.createElement("b",null,"Tab 3")),l.a.createElement("p",null,"Wrong Label, Correct Explanation")),l.a.createElement("div",{className:"scrollable-summary"},r.map((function(e,a){return l.a.createElement(U,{key:a,data:e})})))),l.a.createElement("div",{className:"wrngLabelWrngExp"},l.a.createElement("div",{className:"top-bar"},l.a.createElement("p",null,l.a.createElement("b",null,"Tab 4")),l.a.createElement("p",null,"Wrong Label, Wrong Explanation")),l.a.createElement("div",{className:"scrollable-summary"},c.map((function(e,a){return l.a.createElement(U,{key:a,data:e})}))))),l.a.createElement("div",null,l.a.createElement("h2",null,"Share your Model with Other Users"),l.a.createElement("div",{className:"share-container"},l.a.createElement("div",null,l.a.createElement("p",null,"Test Another Set of Images"),l.a.createElement(p.a,{variant:"primary",onClick:e.triggerResetFunction},"Test More Images")),l.a.createElement("div",null,l.a.createElement("p",null,"Want to share your findings with other users? Upload to database."),l.a.createElement(p.a,{variant:"primary"},"Share Findings")),l.a.createElement("div",null,l.a.createElement("p",null,"Explore what other users have found!"),l.a.createElement(p.a,{variant:"primary"},"Explore Database")))))}t(91);function Y(e){var a=Object(n.useState)(e.data),t=Object(v.a)(a,2),r=t[0],c=t[1],o=function(e){var a=r.map((function(a){a.id==e.id&&(a.agreeLabel=e.agreeLabel);return a}));c(a)};Object(n.useEffect)((function(){e.updateAllData(r)}),[r]);return l.a.createElement("div",null,r.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement(I,{name:e.id,data:e.data,label:"",agreeValue:e.agreeLabel,sendChangedData:o}))})))}function z(){var e=Object(n.useState)(0),a=Object(v.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),o=Object(v.a)(c,2),i=(o[0],o[1]),u=Object(n.useState)(!1),m=Object(v.a)(u,2),s=m[0],d=m[1],E=Object(n.useState)([]),f=Object(v.a)(E,2),b=f[0],h=f[1],g=Object(n.useState)(""),y=Object(v.a)(g,2),x=y[0],N=y[1],S=function(e){r(t>=3?3:function(e){return e+1})},L=function(){r(0==t?0:function(e){return e-1})};return console.log("all data"),console.log(b),l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h1",null,"Step: ",t+1),l.a.createElement("div",{className:"progress-button"},l.a.createElement(O,{currentStep:t}),l.a.createElement("div",{className:"nextPrev-btn"},function(e){return e>0?l.a.createElement(p.a,{className:"prevBtn btn btn-secondary",type:"button",onClick:L},"Previous"):""}(t),function(e){return 3==e?"":s&&e<3?l.a.createElement(p.a,{id:"nextBtn",className:"btn btn-secondary",type:"button",onClick:S},"Next"):l.a.createElement(p.a,{disabled:!0,id:"nextBtn",className:"btn btn-secondary",type:"button",onClick:S},"Next")}(t)))),l.a.createElement("div",null,0==t?l.a.createElement(k,{addData:function(e){h((function(a){return[].concat(Object(j.a)(a),[e])}))},getImages:function(e){i(e)},checkNext:function(e){d(e)},currentStep:t,getDeletedItem:function(e){var a=b.filter((function(a){return a.id!==e}));h(a)}}):"",1==t?l.a.createElement(Y,{data:b,updateAllData:function(e){h(e)}}):"",2==t?l.a.createElement(F,{data:b,sendImprovement:function(e){N(e)},sendExpToMasterUpload:function(e){h(e)},improvement:x}):"",3==t?l.a.createElement(X,{totalData:b,triggerResetFunction:function(){r(0),i([]),h([]),d(!1),N("")}}):""))}var H=function(){return l.a.createElement("div",null,l.a.createElement(C,null),l.a.createElement(D.a,null,l.a.createElement(T.c,null,l.a.createElement(T.a,{exact:!0,path:"/hai-platform/getStarted",component:f}),l.a.createElement(T.a,{path:"/hai-platform/upload",component:z}),l.a.createElement(T.a,{path:"/hai-platform/explore",component:w}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(D.a,null,l.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[71,1,2]]]);
//# sourceMappingURL=main.fe0dd82d.chunk.js.map